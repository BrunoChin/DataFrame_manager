{% extends 'template.html' %}
{% block conteudo %}

    <form class="py-3">
      <div class="form-group">
        <label for="file">Escolher arquivo:</label> <br>
        <input type="file" class="form-control-file" id="file" name="file" disabled>
      </div>
    </form>
    <div class="outer border">
        <table class="table table-bordered">
            <thead>
                <tr>
                    {% for label in labels %}
                        <th>{{ label }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                 {% for row in values %}
                <tr>
                    {% for value in row %}
                        <td>{{ value }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <div class="row m-2">
        <form method="get" id="checkNull">
            <input type="submit" value="valor nulo" >
        </form>
    </div>

    <div class="outer" id="response_area" style="border-style: solid; font-size: 12px">

    </div>

    <script type="text/javascript">
        window.onload = function() {
            const check_null = document.getElementById("checkNull")
            const response_area = document.getElementById("response_area")

            check_null.onsubmit = function(event) {
                event.preventDefault();
                fetch("/checknull", {
                    method: "GET"
                })
                .then(response => {
                    return response.blob()
                })
                .then(() => {
                    fetch("/get_responce", {
                        method: "GET"
                    })
                    .then(response => {
                        return response.text();
                    })
                    .then(html => {
                        console.log(html)
                        response_area.innerHTML = html
                    })
                })
            }
        }
    </script>

{% endblock %}